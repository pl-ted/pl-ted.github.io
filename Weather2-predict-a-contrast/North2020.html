<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet">
<!-- Compiled and minified CSS -->
<link rel="stylesheet" href="src/css/materialize.min.css">

<script src="src/js/brain.js"></script>
<script src="src/js/jquery.min.js"></script>
<script src="src/js/trainDefault.js"></script>
<script src="src/js/trainNE-JanMar.js"></script>
<script src="src/js/trainNE-AprJun.js"></script>
<script src="src/js/trainNE-JulSep.js"></script>
<script src="src/js/trainNE-OctDec.js"></script>
<script src="src/js/trainNENW-JanMar.js"></script>
<script src="src/js/trainNENW-AprJun.js"></script>
<script src="src/js/trainNENW-JulSep.js"></script>
<script src="src/js/trainNENW-OctDec.js"></script>

</head>

<body>

<div class="container" id="homePage">
    <h4 class="center">Bradford Hourly Weather Observation versus 2020 North Leads</h4>
    <div class="input-field" id="forminput">
      <div class="row" style="border-bottom: 1px solid #f2f2f2; padding-bottom: 10px;">
        <div class="col s12 m6 l4">
          <label for="period">
            Select Training Data Set
          </label>
          <select id="period" class="browser-default" required>
            <option value="" disabled selected>Choose your option</option>
            <option value="1" selected>1 Jan-Mar NE</option>
            <option value="2">2 Apr-Jun NE</option>
            <option value="3">3 Jul-Sep NE</option>
            <option value="4">4 Oct-Dec NE</option>
            <option value="5">5 Jan-Mar NE/NW</option>
            <option value="6">6 Apr-Jun NE/NW</option>
            <option value="7">7 Jul-Sep NE/NW</option>
            <option value="8">8 Oct-Dec NE/NW</option>
          </select>
        </div>
        <div class="col s12 m6 l4">
          <label for="iterations">
            Select No. of Iterations
          </label>
          <select id="iterations" class="browser-default" required>
            <option value="" disabled selected>Choose your option</option>
            <option value="10000">10,000</option>
            <option value="20000" selected>20,000</option>
            <option value="30000">30,000</option>
            <option value="40000">40,000</option>
          </select>
        </div>
        <div class="col s12 m6 l4">
          <label for="learning">
            Select Learning Rate
          </label>
          <select id="learning" class="browser-default" required>
            <option value="" disabled selected>Choose your option</option>
            <option value="0.1">0.1</option>
            <option value="0.2">0.2</option>
            <option value="0.3" selected>0.3</option>
            <option value="0.4">0.4</option>
            <option value="0.5">0.5</option>
            <option value="0.6">0.6</option>
            <option value="0.7">0.7</option>
            <option value="0.8">0.8</option>
            <option value="0.9">0.9</option>
            <option value="1">1.0</option>
          </select>
        </div>
      </div>
      <div class="row" style="border-bottom: 1px solid #f2f2f2; padding-bottom: 10px;">
        <div class="col s12 m6 l6">
          <label for="weekday">
            Select Day of Week
          </label>
          <select id="weekday" class="browser-default" required>
            <option value="" disabled selected>Choose your option</option>
            <option value="1">Sunday 1</option>
            <option value="2">Monday 2</option>
            <option value="3">Tuesday 3</option>
            <option value="4">Wednesday 4</option>
            <option value="5">Thursday 5</option>
            <option value="6" selected>Friday 6</option>
            <option value="7">Saturday 7</option>
          </select>
        </div>
        <div class="col s12 m6 l6">
          <label for="hour">
            Select Hour
          </label>
          <select id="hour" class="browser-default" required>
            <option value="" disabled selected>Choose your option</option>
            <option value="0">00</option>
            <option value="1">01</option>
            <option value="2">02</option>
            <option value="3">03</option>
            <option value="4">04</option>
            <option value="5">05</option>
            <option value="6">06</option>
            <option value="7">07</option>
            <option value="8">08</option>
            <option value="9">09</option>
            <option value="10">10</option>
            <option value="11" selected>11</option>
            <option value="12">12</option>
            <option value="13">13</option>
            <option value="14">14</option>
            <option value="15">15</option>
            <option value="16">16</option>
            <option value="17">17</option>
            <option value="18">18</option>
            <option value="19">19</option>
            <option value="20">20</option>
            <option value="21">21</option>
            <option value="22">22</option>
            <option value="23">23</option>
            <option value="24">24</option>
          </select>
        </div>

      </div>
      <div class="row">
        <div class="col s12 m6 l6">
          <label for="airtemp">
            Enter the Air Temperature
          </label>
          <input type="text" name="airtemp" id="airtemp" value="5.2" required>
        </div>
        <div class="col s12 m6 l6">
          <label for="dewpoint">
            Dewpoint
          </label>
          <input type="text" name="dewpoint" id="dewpoint" value="0.3" required>
        </div>
      </div>
      <div class="row">
        <div class="col s12 m6 l6">
          <label for="wbt">
            Wet Bulb Temperature
          </label>
          <input type="text" name="wbt" id="wbt" value="3.3" required>
        </div>
        <div class="col s12 m6 l6">
          <label for="humidity">
            Relative Humidity
          </label>
          <input type="text" name="humidity" id="humidity" value="70.3" required>
        </div>
      </div>
      <div class="col s12 m12 l6">
      <label>
        <p>Example:</p>
        <p>Weekday: 7,  Hour: 7, Airtemp: 6.6, Dewpoint: 4.7, wbt: 5.8, Humidity: 88, Output: 0</p>
        <p>Weekday: 7, Hour: 8, Airtemp: 6.7, Dewpoint: 4.3, wbt: 5.7 , Humidity: 85.1, Output: 1</p>
  
      </label>
    </div>
    </div>
    <p class="center-align">
    <!-- <a class="waves-effect waves-light btn" onclick="submit()">Check</a>  -->
    <a class="waves-effect waves-light btn" id="submit">Run Data</a>

    </p>
    <div class="row">
       <label class="" for="result" id="input" style="">
          
       </label>
    </div>
    <div class="row">
	     <div class="col s12 " for="result" id="result" style="font-size: 16px;background-color: lightgrey; color: white;">
	        
	     </div>
    </div>
    <div class="row">
       <label class="" for="result" id="info" style="">
          
       </label>
    </div>
    <div>
    

  </div>


<script>


$(document).ready(function () {

function calculateMessage(){
    document.getElementById("submit").innerHTML = "Running.. Please give me a few minutes.";
    document.getElementById("input").innerHTML = "";
    document.getElementById("result").innerHTML = "Calculating.. ";   
    document.getElementById("info").innerHTML = "";

    // delayed to update screen
    setTimeout(function() {
      trainData(); 
    }, 2000);  

}

function trainData(){
    // Create a Neural Network
    
    const config = {
     // inputSize: 20,
     // inputRange: 20,
     hiddenLayers: [3],
     // hiddenLayers: [4, 4],
     // outputSize: 20,
     // learningRate: 0.6,
     // decayRate: 0.999,
    };

    const iterationv = parseInt(document.getElementById("iterations").value);
    const learningRatev = parseFloat(document.getElementById("learning").value);
    
    // Train the Network with input objects
   
    const net = new brain.NeuralNetwork(config);

    let trainInfo = trainInfoDefault(net, iterationv, learningRatev);
    const period = parseInt(document.getElementById("period").value);
    switch(period) {
      case 1:
          trainInfo = trainInfoNEJanMar(net, iterationv, learningRatev);
        break;
      case 2:
          trainInfo = trainInfoNEAprJun(net, iterationv, learningRatev);
        break;
      case 3:
          trainInfo = trainInfoNEOctDec(net, iterationv, learningRatev);
        break;
      case 4:
          trainInfo = trainInfoNEJulSep(net, iterationv, learningRatev);
        break;
      case 5:
          trainInfo = trainInfoNENWJanMar(net, iterationv, learningRatev);
        break;
      case 6:
          trainInfo = trainInfoNENWAprJun(net, iterationv, learningRatev);
        break;
      case 7:
          trainInfo = trainInfoNENWJulSep(net, iterationv, learningRatev);
        break;
      case 8:
          trainInfo = trainInfoNENWOctDec(net, iterationv, learningRatev);
        break;
      default:
          trainInfo = trainInfoNEJulSep(net, iterationv, learningRatev);
    }
    

    console.log('training complete...');
    console.log(trainInfo);
    submit();

    function submit() {
    	// let result = net.run({"weekday":"6","hour":"13","airtemp":"6.8","dewpoint":"1","wbt":"4.5","humidity":"66.7"});

          let periodv = document.getElementById("period").value
          let weekdayv = document.getElementById("weekday").value
          let hourv = document.getElementById("hour").value
          let airtempv = document.getElementById("airtemp").value
          let dewpointv = document.getElementById("dewpoint").value
          let wbtv = document.getElementById("wbt").value
          let humidityv = document.getElementById("humidity").value

          if(weekdayv==''||hourv==''||airtempv==''||dewpointv==''||wbtv==''||humidityv=='')
            document.getElementById("result").innerHTML = "Please Enter all the values";
          
    		      let object_to_predict = {
    		        weekday: weekdayv,
    		        hour: hourv,
    		        airtemp: airtempv,
    		        dewpoint: dewpointv,
    		        wbt: wbtv,
    		        humidity: humidityv
    		      }
    		      let output = net.run(object_to_predict).Result;
    		      const final_result = ((output)*100).toFixed(2)

              let object_to_predict08 = {weekday: weekdayv, hour: 8, airtemp: airtempv, dewpoint: dewpointv, wbt: wbtv, humidity: humidityv};
              let output08 = net.run(object_to_predict08).Result;
              const final_result08 = ((output08)*100).toFixed(2);

              let object_to_predict09 = {weekday: weekdayv, hour: 9, airtemp: airtempv, dewpoint: dewpointv, wbt: wbtv, humidity: humidityv};
              let output09 = net.run(object_to_predict09).Result;
              const final_result09 = ((output09)*100).toFixed(2);

              let object_to_predict10 = {weekday: weekdayv, hour: 10, airtemp: airtempv, dewpoint: dewpointv, wbt: wbtv, humidity: humidityv};
              let output10 = net.run(object_to_predict10).Result;
              const final_result10 = ((output10)*100).toFixed(2);

              let object_to_predict11 = {weekday: weekdayv, hour: 11, airtemp: airtempv, dewpoint: dewpointv, wbt: wbtv, humidity: humidityv};
              let output11 = net.run(object_to_predict11).Result;
              const final_result11 = ((output11)*100).toFixed(2);

              let object_to_predict12 = {weekday: weekdayv, hour: 12, airtemp: airtempv, dewpoint: dewpointv, wbt: wbtv, humidity: humidityv};
              let output12 = net.run(object_to_predict12).Result;
              const final_result12 = ((output12)*100).toFixed(2);

              let object_to_predict13 = {weekday: weekdayv, hour: 13, airtemp: airtempv, dewpoint: dewpointv, wbt: wbtv, humidity: humidityv};
              let output13 = net.run(object_to_predict13).Result;
              const final_result13 = ((output13)*100).toFixed(2);

              let object_to_predict14 = {weekday: weekdayv, hour: 14, airtemp: airtempv, dewpoint: dewpointv, wbt: wbtv, humidity: humidityv};
              let output14 = net.run(object_to_predict14).Result;
              const final_result14 = ((output14)*100).toFixed(2);

              let object_to_predict15 = {weekday: weekdayv, hour: 15, airtemp: airtempv, dewpoint: dewpointv, wbt: wbtv, humidity: humidityv};
              let output15 = net.run(object_to_predict15).Result;
              const final_result15 = ((output15)*100).toFixed(2);

              let object_to_predict16 = {weekday: weekdayv, hour: 16, airtemp: airtempv, dewpoint: dewpointv, wbt: wbtv, humidity: humidityv};
              let output16 = net.run(object_to_predict16).Result;
              const final_result16 = ((output16)*100).toFixed(2);

              let object_to_predict17 = {weekday: weekdayv, hour: 17, airtemp: airtempv, dewpoint: dewpointv, wbt: wbtv, humidity: humidityv};
              let output17 = net.run(object_to_predict17).Result;
              const final_result17 = ((output17)*100).toFixed(2);

              let object_to_predict18 = {weekday: weekdayv, hour: 18, airtemp: airtempv, dewpoint: dewpointv, wbt: wbtv, humidity: humidityv};
              let output18 = net.run(object_to_predict18).Result;
              const final_result18 = ((output18)*100).toFixed(2);

              let object_to_predict19 = {weekday: weekdayv, hour: 19, airtemp: airtempv, dewpoint: dewpointv, wbt: wbtv, humidity: humidityv};
              let output19 = net.run(object_to_predict19).Result;
              const final_result19 = ((output19)*100).toFixed(2);

              let object_to_predict20 = {weekday: weekdayv, hour: 20, airtemp: airtempv, dewpoint: dewpointv, wbt: wbtv, humidity: humidityv};
              let output20 = net.run(object_to_predict20).Result;
              const final_result20 = ((output20)*100).toFixed(2);

              let object_to_predict21 = {weekday: weekdayv, hour: 21, airtemp: airtempv, dewpoint: dewpointv, wbt: wbtv, humidity: humidityv};
              let output21 = net.run(object_to_predict21).Result;
              const final_result21 = ((output21)*100).toFixed(2);
              
              const trainInfo_value = trainInfo;

              document.getElementById("input").innerHTML = "Input: " + "dataset: " +  periodv + ", weekday: " + weekdayv + ", airtemp: " + airtempv + ", dewpoint: " + dewpointv + ", wbt: " + wbtv + ", humidity: " + humidityv ;

      			  // Display the probability 
      			  document.getElementById("result").innerHTML = "Result: "  + final_result + " %"  + "<br>"  + "Hour 08: " + final_result08 + " %" + "<br>"  + "Hour 09: " + final_result09  + " %" + "<br>"  + "Hour 10: " + final_result10 + " %" + "<br>"  + "Hour 11: " + final_result11 + " %" + "<br>"  + "Hour 12: " + final_result12 + " %" + "<br>"  + "Hour 13: " + final_result13 + " %" + "<br>"  + "Hour 14: " + final_result14 + " %" + "<br>"  + "Hour 15: " + final_result15 + " %" + "<br>"  + "Hour 16: " + final_result16 + " %" + "<br>"  + "Hour 17: " + final_result17 + " %" + "<br>"  + "Hour 18: " + final_result18 + " %" + "<br>"  + "Hour 19: " + final_result19 + " %" + "<br>"  + "Hour 20: " + final_result20 + " %" + "<br>"  + "Hour 21: " + final_result21 + " %";
    	  

              document.getElementById("info").innerHTML = "Training Info: " + JSON.stringify(trainInfo_value, null, 2);

              document.getElementById("submit").innerHTML = "Calculation Completed. Click Here to Run Again.";
            
    } // submit()

  } //trainData()

    //$(document).on('click', '#submit', function(){ 
    $("#submit").click(function () {
            calculateMessage(); 
            console.log("submit");
    });

})

</script>
</body>
</html>